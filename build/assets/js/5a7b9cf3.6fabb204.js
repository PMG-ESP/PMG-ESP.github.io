"use strict";(self.webpackChunkservices_reseaux=self.webpackChunkservices_reseaux||[]).push([[197],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var r=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a,r,s={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var o=r.createContext({}),u=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,s=e.mdxType,n=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),d=s,g=c["".concat(o,".").concat(d)]||c[d]||m[d]||n;return a?r.createElement(g,l(l({ref:t},p),{},{components:a})):r.createElement(g,l({ref:t},p))}));function d(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var n=a.length,l=new Array(n);l[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:s,l[1]=i;for(var u=2;u<n;u++)l[u]=a[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5953:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>n,metadata:()=>i,toc:()=>u});var r=a(7462),s=(a(7294),a(3905));const n={},l=void 0,i={unversionedId:"Services Avanc\xe9s/Service-Messagerie",id:"Services Avanc\xe9s/Service-Messagerie",title:"Service-Messagerie",description:"1. Le service de messagerie  est compos\xe9 essentiellement de trois programmes appel\xe9s agents de messagerie :",source:"@site/docs\\Services Avanc\xe9s\\Service-Messagerie.md",sourceDirName:"Services Avanc\xe9s",slug:"/Services Avanc\xe9s/Service-Messagerie",permalink:"/Services Avanc\xe9s/Service-Messagerie",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Services Avanc\xe9s/Service-Messagerie.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Service-LDAP",permalink:"/Services Avanc\xe9s/Service-LDAP"},next:{title:"Service-RTC",permalink:"/Services Avanc\xe9s/Service-RTC"}},o={},u=[{value:"1. <strong>Le service de messagerie  est compos\xe9 essentiellement de trois programmes appel\xe9s agents de messagerie</strong> :",id:"1-le-service-de-messagerie--est-compos\xe9-essentiellement-de-trois-programmes-appel\xe9s-agents-de-messagerie-",level:3},{value:"2. <strong>Il y a essentiellement quatre protocoles de messagerie</strong>",id:"2-il-y-a-essentiellement-quatre-protocoles-de-messagerie",level:3},{value:"3. <strong>L\u2019adresse email d\u2019un utilisateur sur un serveur de messagerie est de la forme</strong>",id:"3-ladresse-email-dun-utilisateur-sur-un-serveur-de-messagerie-est-de-la-forme",level:3},{value:"4. <strong>Il y a deux mani\xe8res de stocker les mails sur un serveur de messagerie</strong> :",id:"4-il-y-a-deux-mani\xe8res-de-stocker-les-mails-sur-un-serveur-de-messagerie-",level:3},{value:"installation et configuration d&#39;un serveur de messagerie sous ubuntu(20.04)",id:"installation-et-configuration-dun-serveur-de-messagerie-sous-ubuntu2004",level:3},{value:"Installation des paquets",id:"installation-des-paquets",level:4},{value:"Configuration",id:"configuration",level:4}],p={toc:u};function m(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h3",{id:"1-le-service-de-messagerie--est-compos\xe9-essentiellement-de-trois-programmes-appel\xe9s-agents-de-messagerie-"},"1. ",(0,s.kt)("strong",{parentName:"h3"},"Le service de messagerie  est compos\xe9 essentiellement de trois programmes appel\xe9s agents de messagerie")," :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Il s\u2019agit du ",(0,s.kt)("strong",{parentName:"li"},"MUA")," (Mail User Agent) qui s\u2019occupe de la lecture ou de l\u2019\xe9criture de mail ; on l\u2019appelle client de messagerie ; Ex thunderbird,roundcube."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"MTA")," (Mail Transfer Agent) qui s\u2019occupe de la r\xe9ception des mails venant des clients et de leurs transferts ; on l\u2019appelle serveur SMTP ; Ex postfix."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"MDA")," (Mail Deliver Agent) qui s\u2019occupe de la distribution des mails dans les bo\xeetes des utilisateurs ; Ex dovecot.")),(0,s.kt)("h3",{id:"2-il-y-a-essentiellement-quatre-protocoles-de-messagerie"},"2. ",(0,s.kt)("strong",{parentName:"h3"},"Il y a essentiellement quatre protocoles de messagerie")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Le protocole ",(0,s.kt)("strong",{parentName:"li"},"SMTP")," (Simple Mail Transfer Protocol) utilis\xe9 par un MUA pour envoyer un mail \xe0 son MTA ou par un MTA pour envoyer un mail \xe0 un homologue MTA."),(0,s.kt)("li",{parentName:"ul"},"Le protocole ",(0,s.kt)("strong",{parentName:"li"},"POP")," (Post Office Protocol) qui permet \xe0 un client de demander \xe0 ce qu\u2019on lui transf\xe8re tous ses mails."),(0,s.kt)("li",{parentName:"ul"},"Le protocole ",(0,s.kt)("strong",{parentName:"li"},"IMAP")," (Internet Mail Access Protocol) qui permet \xe0 un client de se connecter et de manipuler \xe0 distance ses mails."),(0,s.kt)("li",{parentName:"ul"},"Le protocole ",(0,s.kt)("strong",{parentName:"li"},"MIME")," (Multipurpose Internet Mail Extension) qui s\u2019occupe de l\u2019attachement des fichiers multim\xe9dias aux mails ; En r\xe9alit\xe9 MIME est un format de donn\xe9e qui permet \xe0 un client de distinguer le corps du mail des fichiers attach\xe9s.\nNB : Un serveur SMTP \xe9coute par d\xe9faut sur le port 25 et utilise TCP, Un serveur POP \xe9coute sur le port 110 et un serveur IMAP sur le port 143.\nUn serveur de messagerie c\u2019est le couple MDA&MTA")),(0,s.kt)("h3",{id:"3-ladresse-email-dun-utilisateur-sur-un-serveur-de-messagerie-est-de-la-forme"},"3. ",(0,s.kt)("strong",{parentName:"h3"},"L\u2019adresse email d\u2019un utilisateur sur un serveur de messagerie est de la forme")),(0,s.kt)("p",null,"login@nomd\u2019hote.nomcompletdomaine mais pour des raisons de s\xe9curit\xe9 et autres on pr\xe9f\xe8re que l\u2019adresse soit de la forme login@nomcompledomaine et demander au serveur DNS d\u2019indiquer la liste des serveurs de messagerie de son domaine gr\xe2ce \xe0 l\u2019enregistrement de type MX"),(0,s.kt)("h3",{id:"4-il-y-a-deux-mani\xe8res-de-stocker-les-mails-sur-un-serveur-de-messagerie-"},"4. ",(0,s.kt)("strong",{parentName:"h3"},"Il y a deux mani\xe8res de stocker les mails sur un serveur de messagerie")," :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Format mailbox")," : on stocke tous les mails d\u2019un utilisateur dans un m\xeame fichier."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Format maildir")," : on cr\xe9e un dossier pour chaque utilisateur et \xe0 l'int\xe9rieur on met chaque mail qui arrive dans un fichier \xe0 part.")),(0,s.kt)("hr",null),(0,s.kt)("h3",{id:"installation-et-configuration-dun-serveur-de-messagerie-sous-ubuntu2004"},"installation et configuration d'un serveur de messagerie sous ubuntu(20.04)"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"NB"),": Il faut au pr\xe9alable avoir un utilisateur mysql"),(0,s.kt)("h4",{id:"installation-des-paquets"},"Installation des paquets"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt update\nsudo apt install  postfix dovecot-pop3d dovecot-imapd roundcube roundcube-mysql\n")),(0,s.kt)("h4",{id:"configuration"},"Configuration"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Config de ",(0,s.kt)("strong",{parentName:"p"},"postfix")," (serveur SMTP)"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /etc/postfix/main.cf\n")),(0,s.kt)("p",{parentName:"li"},"  Modifier les param\xe8tres suivants:"),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"mydestination permet au serveur de distinguer les mails qui sont pour lui"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"myorigin = esp.sn\nmydestination = esp.sn\n")),(0,s.kt)("p",{parentName:"blockquote"},"  Choisir le format maildir"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"home_mailbox = Maildir/\n")),(0,s.kt)("p",{parentName:"blockquote"},"  Red\xe9marrer le serveur postfix"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service postfix restart\n")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Config du ",(0,s.kt)("strong",{parentName:"p"},"MDA")),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /etc/dovecot/conf.d/10-mail.conf\n")),(0,s.kt)("p",{parentName:"li"},"  Modifier les param\xe8tres suivants:"),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"desactiver mailbox"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"#mail_location = mbox:~/mail:INBOX=/var/mail/%u\n")),(0,s.kt)("p",{parentName:"blockquote"},"  activer maildir"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"mail_location = maildir:~/Maildir\n")),(0,s.kt)("p",{parentName:"blockquote"},"  Red\xe9marrer le serveur dovecot"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service dovecot restart\n")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"H\xe9berger le serveur ",(0,s.kt)("strong",{parentName:"p"},"roundcube")),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /etc/apache2/conf-available/roundcube.conf\n")),(0,s.kt)("p",{parentName:"li"},"  Modifier les param\xe8tres suivants:"),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"d\xe9commenter Alias"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"# Uncomment them to use it or adapt them to your configuration\nAlias /roundcube /var/lib/roundcube\n")),(0,s.kt)("p",{parentName:"blockquote"},"  Red\xe9marrer apache"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service apache2 restart\n")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Configurer ",(0,s.kt)("strong",{parentName:"p"},"roundcube")),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /var/lib/roundcube/config/config.inc.php\n")),(0,s.kt)("p",{parentName:"li"},"  Modifier les param\xe8tres suivants:"),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"nom d'h\xf4te du serveur imap"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"$config['default_host'] = 'esp.sn';\n")),(0,s.kt)("p",{parentName:"blockquote"},"  adresse ip et port du serveur smtp"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"$config['smtp_server'] = 'localhost';\n// SMTP port. Use 25 for cleartext, 465 for Implicit TLS, or 587 for STARTTLS (default)\n$config['smtp_port'] = 25;\n")),(0,s.kt)("p",{parentName:"blockquote"},"  d\xe9sactiver l'authentification"),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"// SMTP username (if required) if you use %u as the username Roundcube\n// will use the current username for login\n$config['smtp_user'] = '';\n// SMTP password (if required) if you use %p as the password Roundcube\n// will use the current user s password for login\n$config['smtp_pass'] = '';\n")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"faire le r\xe9solution de esp.sn"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /etc/hosts\n")),(0,s.kt)("p",{parentName:"li"},"  ajouter"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"127.0.0.1       localhost esp.sn mail.esp.sn\n"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"acc\xe9der au webmail avec l\u2019adresse mail.esp.sn"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo nano /etc/apache2/sites-available/mail.conf\n")),(0,s.kt)("p",{parentName:"li"},"  ajouter"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"<VirtualHost *:80>\nServerName mail.esp.sn\nDocumentRoot /var/lib/roundcube\nDirectoryIndex index.php\n</VirtualHost>\n")),(0,s.kt)("p",{parentName:"li"},"  activer le site"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo a2ensite mail.conf\n")),(0,s.kt)("p",{parentName:"li"},"  red\xe9marrer apache"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"sudo service apache2 restart \n")),(0,s.kt)("hr",{parentName:"li"}),(0,s.kt)("p",{parentName:"li"},"  ",(0,s.kt)("img",{alt:"photo",src:a(7647).Z,width:"933",height:"536"}),"\n",(0,s.kt)("img",{alt:"photo",src:a(6527).Z,width:"929",height:"528"})))))}m.isMDXComponent=!0},7647:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/dovecot1-3e3a19ff803e4a57504df1f61905d51b.png"},6527:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/dovecot2-d65589bf3cc6b8a7028dbc097d82b18f.png"}}]);